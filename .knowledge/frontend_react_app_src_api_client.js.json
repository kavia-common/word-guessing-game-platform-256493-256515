{"is_source_file": true, "format": "JavaScript", "description": "This file is a client-side API utility module for a Word Guessing Game frontend, providing functions to interact with a backend API including starting new games, submitting guesses, retrieving session info, and leaderboard data. It also performs initial API health checks and handles environment configuration for API base URL resolution.", "external_files": ["fetch"], "external_methods": ["fetch"], "published": ["getApiBase", "apiStartGame", "apiSubmitGuess", "apiGetSession", "apiGetLeaderboard"], "classes": [], "methods": [{"name": "safeEnv(key)", "description": "Safely reads environment variable values from process.env, guarding against environments where 'process' is undefined or inaccessible.", "scope": "", "scopeKind": ""}, {"name": "normalizeBaseEnsureApi(base)", "description": "Normalizes an input base URL by removing trailing slashes and appending '/api' if it's not already present.", "scope": "", "scopeKind": ""}, {"name": "normalizeBase(base)", "description": "Removes trailing slashes from a base URL without ensuring '/api' prefix.", "scope": "", "scopeKind": ""}, {"name": "getApiBase()", "description": "Determines effective API base URL, considering runtime override (__API_BASE__), build-time environment variable, and defaults to 'http://localhost:3001/api'.", "scope": "", "scopeKind": ""}, {"name": "withBase(path)", "description": "Constructs full URL for API endpoint by appending path to normalized API base URL.", "scope": "", "scopeKind": ""}, {"name": "logAndProbeApiBase", "description": "Immediately invoked async function that logs the resolved API base and performs a health check GET request to verify backend availability."}, {"name": "doJson(url, options = {})", "description": "Performs fetch request with JSON headers, processes response, and throws structured errors for network or HTTP errors.", "scope": "", "scopeKind": ""}, {"name": "apiStartGame(playerName)", "description": "Starts a new game session with optional player name, returns session info.", "scope": "", "scopeKind": ""}, {"name": "apiSubmitGuess(sessionId, guess)", "description": "Submits a guess for the current game session and returns feedback and game status.", "scope": "", "scopeKind": ""}, {"name": "apiGetSession(sessionId)", "description": "Retrieves current session details including attempts and status.", "scope": "", "scopeKind": ""}, {"name": "apiGetLeaderboard()", "description": "Fetches the game's leaderboard data.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "console.info", "console.warn", "console.error"], "search-terms": ["client-side API", "Word Guessing Game", "API health check", "API base URL resolve", "start game", "submit guess", "get session", "leaderboard", "fetch wrapper", "environment configuration"], "state": 2, "file_id": 13, "knowledge_revision": 56, "git_revision": "208e4ac27609b07564871bc956bbbb30ab2bff6f", "revision_history": [{"30": ""}, {"45": "9394d2417b0e6289d2f90f2e9e6d32e6319d488f"}, {"47": "a0dc16cf797fc9f448638a6a967a51e6bdd588e5"}, {"49": "85d56377ef3c0b88d89757df5d7c025ae31aa3f0"}, {"54": "17348a58fa56dfa2c81a9a4e43ae6ae5e744b88e"}, {"56": "208e4ac27609b07564871bc956bbbb30ab2bff6f"}], "ctags": [{"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^      'Content-Type': 'application\\/json',$/", "language": "JavaScript", "kind": "property", "scope": "doJson.merged.headers", "scopeKind": "class"}, {"_type": "tag", "name": "DEFAULT_BASE", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^const DEFAULT_BASE = 'http:\\/\\/localhost:3001\\/api';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "apiGetLeaderboard", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export async function apiGetLeaderboard() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "apiGetSession", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export async function apiGetSession(sessionId) {$/", "language": "JavaScript", "kind": "function", "signature": "(sessionId)"}, {"_type": "tag", "name": "apiStartGame", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export async function apiStartGame(playerName) {$/", "language": "JavaScript", "kind": "function", "signature": "(playerName)"}, {"_type": "tag", "name": "apiSubmitGuess", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export async function apiSubmitGuess(sessionId, guess) {$/", "language": "JavaScript", "kind": "function", "signature": "(sessionId, guess)"}, {"_type": "tag", "name": "doJson", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^async function doJson(url, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(url, options = {})"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export function getApiBase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^    headers: {$/", "language": "JavaScript", "kind": "class", "scope": "doJson.merged", "scopeKind": "class"}, {"_type": "tag", "name": "merged", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^  const merged = {$/", "language": "JavaScript", "kind": "class", "scope": "doJson", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeBase", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^function normalizeBase(base) {$/", "language": "JavaScript", "kind": "function", "signature": "(base)"}, {"_type": "tag", "name": "normalizeBaseEnsureApi", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^function normalizeBaseEnsureApi(base) {$/", "language": "JavaScript", "kind": "function", "signature": "(base)"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^    let res = await fetch(url1, { method: 'GET' });$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "res2", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^      const res2 = await fetch(url2, { method: 'GET' });$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "safeEnv", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^function safeEnv(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "withBase", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^function withBase(path) {$/", "language": "JavaScript", "kind": "function", "signature": "(path)"}], "hash": "eb908463683505accf6a04bac891cf4f", "format-version": 4, "code-base-name": "frontend_react_app", "filename": "frontend_react_app/src/api/client.js", "fields": [{"name": "'Content-Type': 'application\\/json',", "scope": "doJson.merged.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "let res = await fetch(url1, { method: 'GET' });", "scope": "", "scopeKind": "", "description": "unavailable"}]}