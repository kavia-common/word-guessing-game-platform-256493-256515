{"is_source_file": true, "format": "JavaScript", "description": "This file provides a client-side API for interacting with a backend server of a Word Guessing Game application. It includes functions to determine the API base URL, perform health checks, and send requests to start a game, submit guesses, fetch session details, and retrieve leaderboard data. The code manages environment variables, runtime overrides, and error handling for network and HTTP errors, and it performs an initial connectivity check upon module load.", "external_files": ["../context/AuthContext"], "external_methods": ["window.__getSupabaseAccessToken__()"], "published": ["getApiBase", "apiStartGame", "apiSubmitGuess", "apiGetSession", "apiGetLeaderboard"], "classes": [], "methods": [{"name": "safeEnv(key)", "description": "Safely reads an environment variable from process.env, guarding against undefined process in browser environments.", "scope": "", "scopeKind": ""}, {"name": "normalizeBaseEnsureApi(base)", "description": "Normalizes a base URL by removing trailing slashes and ensuring '/api' segment exists.", "scope": "", "scopeKind": ""}, {"name": "normalizeBase(base)", "description": "Removes trailing slashes from a base URL without adding '/api'.", "scope": "", "scopeKind": ""}, {"name": "getApiBase()", "description": "Determines the effective API base URL by checking runtime overrides, environment variables, or default, and normalizes the URL.", "scope": "", "scopeKind": ""}, {"name": "withBase(path)", "description": "Constructs a full URL by combining the API base with a given path, ensuring proper slash separation.", "scope": "", "scopeKind": ""}, {"name": "logAndProbeApiBase", "description": "Immediately invoked async function that logs the resolved API base URL and performs a health check to verify backend connectivity."}, {"name": "doJson(url, options = {})", "description": "Performs a fetch request expecting JSON response, handles network errors, and throws structured errors for HTTP failures.", "scope": "", "scopeKind": ""}, {"name": "apiStartGame(playerName)", "description": "Calls the backend to start a new game, optionally with a player name.", "scope": "", "scopeKind": ""}, {"name": "apiSubmitGuess(sessionId, guess)", "description": "Submits a guess for a specific game session to the backend.", "scope": "", "scopeKind": ""}, {"name": "apiGetSession(sessionId)", "description": "Retrieves details of a game session by its ID.", "scope": "", "scopeKind": ""}, {"name": "apiGetLeaderboard()", "description": "Fetches the current leaderboard entries from the backend.", "scope": "", "scopeKind": ""}], "calls": ["getApiBase", "normalizeBaseEnsureApi", "normalizeBase", "fetch", "console.info", "console.warn", "console.error", "doJson", "withBase"], "search-terms": ["Word Guessing Game API", "client-side API", "health check", "environment variables", "fetch error handling", "session management", "leaderboard API", "API base URL", "endpoint functions", "connectivity probe"], "state": 2, "file_id": 13, "knowledge_revision": 75, "git_revision": "5164134abf3553b308e33ede3f4550fb987d25f5", "revision_history": [{"30": ""}, {"45": "9394d2417b0e6289d2f90f2e9e6d32e6319d488f"}, {"47": "a0dc16cf797fc9f448638a6a967a51e6bdd588e5"}, {"49": "85d56377ef3c0b88d89757df5d7c025ae31aa3f0"}, {"54": "17348a58fa56dfa2c81a9a4e43ae6ae5e744b88e"}, {"56": "208e4ac27609b07564871bc956bbbb30ab2bff6f"}, {"57": "a251f83795853566e81d92f9643fd5ed8c162940"}, {"75": "5164134abf3553b308e33ede3f4550fb987d25f5"}], "ctags": [{"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^      'Content-Type': 'application\\/json',$/", "language": "JavaScript", "kind": "property", "scope": "doJson.merged.headers", "scopeKind": "class"}, {"_type": "tag", "name": "DEFAULT_BASE", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^const DEFAULT_BASE = 'http:\\/\\/localhost:3001\\/api';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "apiGetLeaderboard", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export async function apiGetLeaderboard() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "apiGetSession", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export async function apiGetSession(sessionId) {$/", "language": "JavaScript", "kind": "function", "signature": "(sessionId)"}, {"_type": "tag", "name": "apiStartGame", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export async function apiStartGame(playerName) {$/", "language": "JavaScript", "kind": "function", "signature": "(playerName)"}, {"_type": "tag", "name": "apiSubmitGuess", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export async function apiSubmitGuess(sessionId, guess) {$/", "language": "JavaScript", "kind": "function", "signature": "(sessionId, guess)"}, {"_type": "tag", "name": "doJson", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^async function doJson(url, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(url, options = {})"}, {"_type": "tag", "name": "frontendOrigin", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^      const frontendOrigin = (typeof window !== 'undefined' && window.location)$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export function getApiBase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^    headers: {$/", "language": "JavaScript", "kind": "class", "scope": "doJson.merged", "scopeKind": "class"}, {"_type": "tag", "name": "merged", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^  const merged = {$/", "language": "JavaScript", "kind": "class", "scope": "doJson", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeBase", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^function normalizeBase(base) {$/", "language": "JavaScript", "kind": "function", "signature": "(base)"}, {"_type": "tag", "name": "normalizeBaseEnsureApi", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^function normalizeBaseEnsureApi(base) {$/", "language": "JavaScript", "kind": "function", "signature": "(base)"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^    let res = await fetch(url1, { method: 'GET' });$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "res2", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^      const res2 = await fetch(url2, { method: 'GET' });$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "safeEnv", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^function safeEnv(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "withBase", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^function withBase(path) {$/", "language": "JavaScript", "kind": "function", "signature": "(path)"}], "hash": "0f552db7af3a1b3d5055f26b9e5b76d8", "format-version": 4, "code-base-name": "frontend_react_app", "filename": "frontend_react_app/src/api/client.js", "fields": [{"name": "'Content-Type': 'application\\/json',", "scope": "doJson.merged.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "let res = await fetch(url1, { method: 'GET' });", "scope": "", "scopeKind": "", "description": "unavailable"}]}