{"is_source_file": true, "format": "JavaScript", "description": "A client-side API wrapper module for the Word Guessing Game frontend, providing functions to start games, submit guesses, fetch session data, and retrieve leaderboard standings, along with API base URL resolution and health check logic.", "external_files": ["node-fetch (implicitly used, as 'fetch' is called, assuming available in environment)"], "external_methods": ["fetch"], "published": ["apiStartGame", "apiSubmitGuess", "apiGetSession", "apiGetLeaderboard"], "classes": [], "methods": [{"name": "getApiBase()", "description": "Returns the effective API base URL, considering runtime overrides, environment variables, and defaults.", "scope": "", "scopeKind": ""}, {"name": "safeEnv(key)", "description": "Safely reads environment variables without throwing errors, compatible with CRA build environment.", "scope": "", "scopeKind": ""}, {"name": "normalizeBaseEnsureApi(base)", "description": "Ensures a base URL includes the /api suffix, normalizing trailing slashes.", "scope": "", "scopeKind": ""}, {"name": "normalizeBase(base)", "description": "Normalizes a base URL by removing trailing slashes without adding /api.", "scope": "", "scopeKind": ""}, {"name": "withBase(path)", "description": "Constructs a full URL by combining the API base with a provided path, ensuring correct slash placement.", "scope": "", "scopeKind": ""}, {"name": "logAndProbeApiBase", "description": "Immediately invoked async function that logs the resolved API base URL and performs a health check by fetching /health endpoints, with error handling and guidance."}, {"name": "doJson(url, options = {})", "description": "Performs a fetch request with JSON handling, error parsing, and network error conversion, returning parsed JSON data or throwing detailed errors.", "scope": "", "scopeKind": ""}, {"name": "apiStartGame(playerName)", "description": "Starts a new game session via POST request, optionally with a player name.", "scope": "", "scopeKind": ""}, {"name": "apiSubmitGuess(sessionId, guess)", "description": "Submits a guess to the backend for the current session.", "scope": "", "scopeKind": ""}, {"name": "apiGetSession(sessionId)", "description": "Fetches current session details, including game status and attempts.", "scope": "", "scopeKind": ""}, {"name": "apiGetLeaderboard()", "description": "Retrieves the leaderboard data.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "getApiBase", "normalizeBaseEnsureApi", "normalizeBase", "withBase"], "search-terms": ["Word Guessing Game API client", "React API wrapper", "/health health check", "CORS guidance", "API base URL resolution", "game session management", "guess submission", "leaderboard API"], "state": 2, "file_id": 13, "knowledge_revision": 57, "git_revision": "a251f83795853566e81d92f9643fd5ed8c162940", "revision_history": [{"30": ""}, {"45": "9394d2417b0e6289d2f90f2e9e6d32e6319d488f"}, {"47": "a0dc16cf797fc9f448638a6a967a51e6bdd588e5"}, {"49": "85d56377ef3c0b88d89757df5d7c025ae31aa3f0"}, {"54": "17348a58fa56dfa2c81a9a4e43ae6ae5e744b88e"}, {"56": "208e4ac27609b07564871bc956bbbb30ab2bff6f"}, {"57": "a251f83795853566e81d92f9643fd5ed8c162940"}], "ctags": [{"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^      'Content-Type': 'application\\/json',$/", "language": "JavaScript", "kind": "property", "scope": "doJson.merged.headers", "scopeKind": "class"}, {"_type": "tag", "name": "DEFAULT_BASE", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^const DEFAULT_BASE = 'http:\\/\\/localhost:3001\\/api';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "apiGetLeaderboard", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export async function apiGetLeaderboard() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "apiGetSession", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export async function apiGetSession(sessionId) {$/", "language": "JavaScript", "kind": "function", "signature": "(sessionId)"}, {"_type": "tag", "name": "apiStartGame", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export async function apiStartGame(playerName) {$/", "language": "JavaScript", "kind": "function", "signature": "(playerName)"}, {"_type": "tag", "name": "apiSubmitGuess", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export async function apiSubmitGuess(sessionId, guess) {$/", "language": "JavaScript", "kind": "function", "signature": "(sessionId, guess)"}, {"_type": "tag", "name": "doJson", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^async function doJson(url, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(url, options = {})"}, {"_type": "tag", "name": "frontendOrigin", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^      const frontendOrigin = (typeof window !== 'undefined' && window.location)$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^export function getApiBase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^    headers: {$/", "language": "JavaScript", "kind": "class", "scope": "doJson.merged", "scopeKind": "class"}, {"_type": "tag", "name": "merged", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^  const merged = {$/", "language": "JavaScript", "kind": "class", "scope": "doJson", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeBase", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^function normalizeBase(base) {$/", "language": "JavaScript", "kind": "function", "signature": "(base)"}, {"_type": "tag", "name": "normalizeBaseEnsureApi", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^function normalizeBaseEnsureApi(base) {$/", "language": "JavaScript", "kind": "function", "signature": "(base)"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^    let res = await fetch(url1, { method: 'GET' });$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "res2", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^      const res2 = await fetch(url2, { method: 'GET' });$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "safeEnv", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^function safeEnv(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "withBase", "path": "/home/kavia/workspace/code-generation/word-guessing-game-platform-256493-256515/frontend_react_app/src/api/client.js", "pattern": "/^function withBase(path) {$/", "language": "JavaScript", "kind": "function", "signature": "(path)"}], "hash": "37ed66f3bdb71f7b07e273e4453e6f06", "format-version": 4, "code-base-name": "frontend_react_app", "filename": "frontend_react_app/src/api/client.js", "fields": [{"name": "'Content-Type': 'application\\/json',", "scope": "doJson.merged.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "let res = await fetch(url1, { method: 'GET' });", "scope": "", "scopeKind": "", "description": "unavailable"}]}